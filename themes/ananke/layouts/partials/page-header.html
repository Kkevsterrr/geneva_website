{{ $featured_image := .Params.featured_image }}
{{ $featured_color := .Params.featured_color }}
{{ if $featured_image }}
  {{/* Trimming the slash and adding absURL make sure the image works no matter where our site lives */}}
  {{ $featured_image := (trim $featured_image "/") | absURL }}
  <header class="cover bg-top" style="background-image: url('{{ $featured_image }}');">
    <div class="pb3-m pb6-l bg-black-60">
      {{ partial "site-navigation.html" . }}
      <div class="tc-l pv6 ph3 ph4-ns">
        {{ if not .Params.omit_header_text }}
          <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">{{ .Title | default .Site.Title }}</h1>
          {{ with .Params.description  }}
            <h2 class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
              {{ . }}
            </h2>
          {{ end }}
        {{ end }}
      </div>
    </div>

  </header>
{{ else }}
  <header>

  <script src="/particles.js"></script>
    <div id='particle-container' class="{{ .Site.Params.background_color_class | default "bg-black-60" }}" style="background-image: linear-gradient(to bottom left, {{$featured_color}}, purple)">
      {{ partial "site-navigation.html" . }}
    </div>
  <div><div id="particles" style="top:0px;width: 100%;position:  absolute;display: flex; overflow:hidden;z-index:0;pointer-events:none;"></div></div>
    <script type="text/javascript">
        particlesJS.load('particles', '/particles_small.json', function() {
            console.log('callback - particles.js config loaded');
        });
    </script>

  </header>
{{ end }}
